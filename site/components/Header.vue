<template>
	<div class="header-wr">
    <div class="container">
      <div class="header-content">
        <div class="header__left">
          <router-link class="header-logo" to="/">
            <svg width="122" height="50" viewbox="0 0 122 50" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.0339 49.0778c-.2997 0-.5544-.0889-.7642-.2667C.09 48.6037 0 48.3518 0 48.0555V19.0333c0-.3259.0899-.5778.2697-.7556.2098-.2074.4645-.3111.7642-.3111h10.9683c3.4464 0 6.1435.8 8.0914 2.4 1.948 1.6 2.9219 3.9111 2.9219 6.9334 0 2.2518-.5694 4.1037-1.7081 5.5555-1.1089 1.4519-2.6822 2.4593-4.72 3.0222L23.51 47.7c.0899.1778.1349.3407.1349.4889 0 .237-.1049.4444-.3147.6222-.1798.1778-.3896.2667-.6293.2667h-2.1577c-.4496 0-.8092-.1038-1.0789-.3112-.2397-.2074-.4645-.5037-.6743-.8889l-6.518-11.2888H4.4053v11.4666c0 .2963-.1049.5482-.3147.7556-.2097.1778-.4645.2667-.7641.2667H1.0339zm10.7885-16.2667c4.4653 0 6.6979-1.8519 6.6979-5.5556S16.2877 21.7 11.8224 21.7h-7.417v11.1111h7.417zM37.5924 49.5222c-2.847 0-5.0497-.9037-6.608-2.7111-1.5584-1.8371-2.3375-4.2667-2.3375-7.2889V26.9889c0-.2963.0899-.5334.2697-.7112.2097-.2074.4645-.3111.7642-.3111h2.2476c.2997 0 .5394.1037.7192.3111.2098.1778.3147.4149.3147.7112V39.3c0 4.4148 1.9479 6.6222 5.8438 6.6222 1.888 0 3.3864-.5778 4.4952-1.7333 1.1088-1.1852 1.6632-2.8149 1.6632-4.8889V26.9889c0-.2963.0899-.5334.2697-.7112.2098-.2074.4645-.3111.7642-.3111h2.2476c.2997 0 .5395.1037.7193.3111.1798.1778.2697.4149.2697.7112v21.0666c0 .2963-.0899.5482-.2697.7556-.1798.1778-.4196.2667-.7193.2667h-2.1127c-.2997 0-.5544-.0889-.7642-.2667-.1798-.2074-.2697-.4593-.2697-.7556V46.1c-.8391 1.1259-1.858 1.9852-3.0568 2.5777-1.1987.563-2.6821.8445-4.4502.8445zM56.992 49.0778c-.2996 0-.5544-.0889-.7641-.2667-.1798-.2074-.2698-.4593-.2698-.7556l-.3146-35.0333c0-.2963.0899-.5334.2697-.7112.2098-.2074.4645-.3111.7642-.3111h2.1127c.2997 0 .5395.1037.7193.3111.2097.1778.3146.4149.3146.7112l.3147 35.0333c0 .2963-.1049.5482-.3147.7556-.1798.1778-.4195.2667-.7192.2667H56.992zM67.9228 49.0778c-.2997 0-.5544-.0889-.7642-.2667-.1798-.2074-.2697-.4593-.2697-.7556V2c0-.2963.0899-.5333.2697-.7111.2098-.2074.4645-.3111.7642-.3111h2.1128c.2996 0 .5394.1037.7192.311.2098.1779.3147.4149.3147.7112v46.0555c0 .2963-.1049.5482-.3147.7556-.1798.1778-.4196.2667-.7192.2667h-2.1128zM87.1248 49.5222c-3.0867 0-5.5591-.9333-7.4171-2.8-1.8281-1.8963-2.832-4.4741-3.0118-7.7333l-.045-1.5112.045-1.4666c.2098-3.2 1.2287-5.7482 3.0567-7.6445 1.858-1.8963 4.3005-2.8444 7.3272-2.8444 3.3265 0 5.9038 1.0518 7.7318 3.1555 1.8281 2.0741 2.7421 4.8889 2.7421 8.4445v.7555c0 .2963-.1049.5482-.3147.7556-.1798.1778-.4195.2667-.7192.2667H80.9663v.4c.0899 1.9259.6743 3.5703 1.7532 4.9333 1.1088 1.3333 2.5622 2 4.3603 2 1.3786 0 2.5024-.2667 3.3715-.8.899-.563 1.5583-1.1407 1.9779-1.7333.2697-.3556.4645-.563.5843-.6222.1499-.0889.4046-.1334.7642-.1334h2.2027c.2697 0 .4945.0741.6743.2222.1798.1482.2697.3556.2697.6223 0 .6518-.4196 1.437-1.2587 2.3555-.8091.9185-1.9629 1.7185-3.4613 2.4-1.4684.6519-3.1617.9778-5.0796.9778zm6.1584-13.6889V35.7c0-2.0445-.5694-3.7037-1.7081-4.9778-1.1089-1.3037-2.6073-1.9556-4.4953-1.9556-1.888 0-3.3864.6519-4.4952 1.9556-1.0788 1.2741-1.6183 2.9333-1.6183 4.9778v.1333h12.3169zM101.367 49.0778c-.24 0-.465-.0889-.674-.2667-.18-.1778-.27-.4-.27-.6667 0-.2666.105-.5333.315-.8l7.821-10.0889-7.327-9.5555c-.21-.2371-.315-.5037-.315-.8 0-.2667.09-.4889.27-.6667.18-.1778.405-.2667.674-.2667h2.293c.449 0 .839.2371 1.169.7111l5.978 7.6889 5.979-7.6444c.18-.2371.345-.4148.494-.5333.18-.1482.405-.2223.675-.2223h2.202c.27 0 .495.0889.675.2667.18.1778.269.4.269.6667 0 .2963-.104.5629-.314.8l-7.417 9.6444 7.821 10c.21.2667.315.5334.315.8 0 .2667-.09.4889-.27.6667-.18.1778-.404.2667-.674.2667h-2.382c-.45 0-.84-.2223-1.169-.6667l-6.294-8.1334-6.383 8.1334c-.18.2074-.359.3704-.539.4889-.15.1185-.36.1778-.63.1778h-2.292z" fill="#292F44"></path>
              <path d="M56.9921 49.0778c-.2997 0-.5544-.0889-.7642-.2667-.1798-.2074-.2697-.4593-.2697-.7556l-.3146-35.0333c0-.2963.0899-.5334.2697-.7111.2097-.2075.4645-.3112.7642-.3112h2.1127c.2997 0 .5394.1037.7192.3112.2098.1777.3147.4148.3147.7111l.3147 35.0333c0 .2963-.1049.5482-.3147.7556-.1798.1778-.4195.2667-.7192.2667h-2.1128zM67.9229 49.0778c-.2997 0-.5544-.0889-.7642-.2667-.1798-.2074-.2697-.4593-.2697-.7556V2c0-.2963.0899-.5333.2697-.7111.2098-.2074.4645-.3111.7642-.3111h2.1127c.2997 0 .5395.1037.7193.3111.2098.1778.3146.4148.3146.7111v46.0555c0 .2963-.1048.5482-.3146.7556-.1798.1778-.4196.2667-.7193.2667h-2.1127z" fill="#0492F2"></path>
            </svg>
          </router-link>
        </div>

        <div class="header__right">
          <a class="btn" href="google.ru" target="_blank">
            <span class="header-ext-link__text">Расширения для</span>
            <span class="header-ext-link__icon">
              <img :src="browserIcon" />
            </span>
          </a>

          <button
            v-if="isAuth"
            @click="logout"
            class="btn"
          >
            Выйти
          </button>

          <auth-popover v-else=""/>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
  import { mapGetters, mapActions } from 'vuex';
  import authPopover from './AuthPopover'
  import appStat from './AppStat'
  export default {
    name: 'headerTop',
    components: {
      authPopover,
      appStat
    },
    data() {
      return {
        browser: 'chrome'
      }
    },
    computed: {
      ...mapGetters({
        isAuth: 'user/isAuth'
      }),
      browserIcon() {
        return `/${this.browser}.svg`;
      },
    },
    methods: {
      ...mapActions({
        logout: 'user/logout'
      }),
      detectBrowser() {
        if (process.client) {
          var ua = window.navigator.userAgent;
          if (ua.search(/YaBrowser/) > 0)  this.browser = 'yandex';
          if (ua.search(/Opera/) > 0)  this.browser = 'opera';
          if (ua.search(/Google Inc/) > 0)  this.browser = 'chrome';
        }
      },
    },
    mounted() {
      this.detectBrowser();
    }
  }
</script>

<style lang="scss">
  .header-wr {
    box-shadow: 0px 1px 10px rgba(205, 205, 205, 0.25);
    background-color: #fff;
    position: sticky;
    top: 0;
  }
  .header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 15px;
    padding-bottom: 20px;
  }

  .header__left {
    display: flex;
    align-items: flex-end;
  }
  .header-logo {
    line-height: 0;
    position: relative;
    top: -5px;
  }
  .header__right {
    display: flex;
    align-items: center;
    // justify-content: space-between;
  }
  .header-ext-link-wr {
    text-align: center;
    height: 38px;

    &:not(:last-child) {
      margin-right: 50px;
    }
  }
  .header-ext-link__text {
    font-size: 14px;
    line-height: 14px;
    color: #fff;
    margin-right: 10px;
  }
  .header-ext-link__icon {
    line-height: 0;

    svg {
      max-width: 22px;

      path {
        fill: #fff;
      }
    }
  }

  @media (max-width: $tablet) {
    .header-logo {
      svg {
        height: 50px;
        width: auto;
      }
    }
    .header-ext-link-wr {
      height: 34px;
    }
  }

  @media (max-width: $mobile) {
    .header-logo {
      margin-right: 20px;

      svg {
        height: 28px;
      }
    }
    .header-ext-link-wr {
      padding: 5px;
      justify-content: center;
      height: 28px;
    }
    .header-ext-link__text {
      font-size: 12px;
    }
    .header-ext-link__icon {
      img {
        width: 16px;
      }
    }
  }
</style>
