<template>
	<div class="header-wr">
    <div class="container">
      <div class="header-content">
        <div class="header__left">
          <router-link class="header-logo" to="/">
            <svg width="298" height="118" viewBox="0 0 298 118" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M246.306 117.452C245.72 117.452 245.171 117.235 244.659 116.8C244.22 116.366 244 115.823 244 115.172C244 114.521 244.256 113.869 244.769 113.218L263.874 88.5745L245.976 65.2339C245.464 64.6549 245.208 64.0035 245.208 63.2798C245.208 62.6284 245.427 62.0856 245.867 61.6514C246.306 61.2171 246.855 61 247.514 61H253.114C254.212 61 255.163 61.579 255.968 62.737L270.572 81.518L285.176 62.8455C285.615 62.2665 286.017 61.8323 286.383 61.5428C286.823 61.1809 287.372 61 288.03 61H293.411C294.069 61 294.618 61.2171 295.058 61.6514C295.497 62.0856 295.716 62.6284 295.716 63.2798C295.716 64.0035 295.46 64.6549 294.948 65.2339L276.831 88.7916L295.936 113.218C296.448 113.869 296.705 114.521 296.705 115.172C296.705 115.823 296.485 116.366 296.046 116.8C295.607 117.235 295.058 117.452 294.399 117.452H288.579C287.481 117.452 286.53 116.909 285.725 115.823L270.352 95.9567L254.761 115.823C254.321 116.33 253.882 116.728 253.443 117.018C253.077 117.307 252.565 117.452 251.906 117.452H246.306Z" fill="#292F44"/>
              <path d="M206.584 116.623C199.044 116.623 193.005 114.343 188.466 109.784C184.001 105.152 181.549 98.8551 181.11 90.894L181 87.2029L181.11 83.6204C181.622 75.804 184.111 69.5798 188.576 64.9479C193.115 60.316 199.081 58 206.474 58C214.599 58 220.894 60.5693 225.36 65.7078C229.825 70.774 232.058 77.6495 232.058 86.3344V88.18C232.058 88.9037 231.801 89.5189 231.289 90.0255C230.85 90.4598 230.264 90.6769 229.532 90.6769H191.541V91.6539C191.761 96.3582 193.188 100.375 195.823 103.704C198.532 106.961 202.082 108.589 206.474 108.589C209.841 108.589 212.586 107.938 214.709 106.635C216.905 105.26 218.515 103.849 219.54 102.401C220.199 101.533 220.675 101.026 220.968 100.882C221.334 100.665 221.956 100.556 222.834 100.556H228.215C228.873 100.556 229.422 100.737 229.862 101.099C230.301 101.461 230.52 101.967 230.52 102.619C230.52 104.211 229.496 106.129 227.446 108.372C225.47 110.616 222.651 112.57 218.991 114.235C215.404 115.827 211.269 116.623 206.584 116.623ZM221.626 83.1862V82.8605C221.626 77.8667 220.236 73.8137 217.454 70.7016C214.746 67.5172 211.086 65.925 206.474 65.925C201.862 65.925 198.202 67.5172 195.494 70.7016C192.859 73.8137 191.541 77.8667 191.541 82.8605V83.1862H221.626Z" fill="#292F44"/>
              <path d="M2.52543 116.993C1.79342 116.993 1.17121 116.776 0.658808 116.341C0.219603 115.835 0 115.22 0 114.496V43.6055C0 42.8094 0.219603 42.1942 0.658808 41.7599C1.17121 41.2533 1.79342 41 2.52543 41H29.317C37.7351 41 44.3231 42.9541 49.0812 46.8623C53.8393 50.7705 56.2183 56.4157 56.2183 63.7978C56.2183 69.2983 54.8275 73.8216 52.0458 77.3679C49.3374 80.9143 45.4944 83.375 40.5167 84.7501L57.4261 113.627C57.6457 114.062 57.7555 114.46 57.7555 114.822C57.7555 115.401 57.4993 115.907 56.9869 116.341C56.5477 116.776 56.0353 116.993 55.4497 116.993H50.1792C49.0812 116.993 48.2028 116.739 47.544 116.233C46.9584 115.726 46.4094 115.002 45.897 114.062L29.9758 86.4871H10.7605V114.496C10.7605 115.22 10.5043 115.835 9.99192 116.341C9.47952 116.776 8.85731 116.993 8.1253 116.993H2.52543ZM28.8778 77.2594C39.7847 77.2594 45.2382 72.736 45.2382 63.6893C45.2382 54.6425 39.7847 50.1191 28.8778 50.1191H10.7605V77.2594H28.8778Z" fill="#292F44"/>
              <path d="M91.8505 116.537C84.8964 116.537 79.5161 114.33 75.7097 109.915C71.9032 105.428 70 99.4933 70 92.1111V61.4969C70 60.7732 70.2196 60.1942 70.6588 59.7599C71.1712 59.2533 71.7934 59 72.5254 59H78.0155C78.7475 59 79.3331 59.2533 79.7723 59.7599C80.2847 60.1942 80.5409 60.7732 80.5409 61.4969V91.5683C80.5409 102.352 85.299 107.744 94.8151 107.744C99.4268 107.744 103.087 106.333 105.795 103.51C108.504 100.615 109.858 96.6345 109.858 91.5683V61.4969C109.858 60.7732 110.077 60.1942 110.517 59.7599C111.029 59.2533 111.651 59 112.383 59H117.873C118.605 59 119.191 59.2533 119.63 59.7599C120.069 60.1942 120.289 60.7732 120.289 61.4969V112.955C120.289 113.679 120.069 114.294 119.63 114.8C119.191 115.235 118.605 115.452 117.873 115.452H112.713C111.981 115.452 111.359 115.235 110.846 114.8C110.407 114.294 110.187 113.679 110.187 112.955V108.178C108.138 110.928 105.649 113.027 102.721 114.475C99.7928 115.85 96.1693 116.537 91.8505 116.537Z" fill="#292F44"/>
              <path d="M160.994 117.49C160.262 117.49 159.64 117.273 159.128 116.839C158.688 116.332 158.469 115.717 158.469 114.993V2.4969C158.469 1.77316 158.688 1.19417 159.128 0.75993C159.64 0.25331 160.262 0 160.994 0H166.155C166.887 0 167.472 0.25331 167.912 0.75993C168.424 1.19417 168.68 1.77316 168.68 2.4969V114.993C168.68 115.717 168.424 116.332 167.912 116.839C167.472 117.273 166.887 117.49 166.155 117.49H160.994Z" fill="#0492F2"/>
              <path d="M138.294 117.567C137.562 117.567 136.94 117.35 136.427 116.916C135.988 116.409 135.769 115.794 135.769 115.07L135 29.4969C135 28.7732 135.22 28.1942 135.659 27.7599C136.171 27.2533 136.793 27 137.525 27H142.686C143.418 27 144.004 27.2533 144.443 27.7599C144.955 28.1942 145.212 28.7732 145.212 29.4969L145.98 115.07C145.98 115.794 145.724 116.409 145.212 116.916C144.772 117.35 144.187 117.567 143.455 117.567H138.294Z" fill="#0492F2"/>
            </svg>
          </router-link>
        </div>

        <div class="header__right">
          <a class="btn" href="google.ru" target="_blank">
            <span class="header-ext-link__text">Расширения для</span>
            <span class="header-ext-link__icon">
              <img :src="browserIcon" />
            </span>
          </a>

          <button
            v-if="isAuth"
            @click="logout"
            class="btn header-login"
          >
            Выйти
          </button>

          <AuthPopover class="header-login" v-else />
        </div>
      </div>
    </div>
  </div>
</template>

<script>
  import { mapGetters, mapActions } from 'vuex';
  import AuthPopover from './AuthPopover'
  import appStat from './AppStat'
  export default {
    name: 'headerTop',
    components: {
      AuthPopover,
      appStat
    },
    data() {
      return {
        browser: 'chrome'
      }
    },
    computed: {
      ...mapGetters({
        isAuth: 'user/isAuth'
      }),
      browserIcon() {
        return `/${this.browser}.svg`;
      },
    },
    methods: {
      ...mapActions({
        logout: 'user/logout'
      }),
      detectBrowser() {
        if (process.client) {
          var ua = window.navigator.userAgent;
          if (ua.search(/YaBrowser/) > 0)  this.browser = 'yandex';
          if (ua.search(/Opera/) > 0)  this.browser = 'opera';
          if (ua.search(/Google Inc/) > 0)  this.browser = 'chrome';
        }
      },
    },
    mounted() {
      this.detectBrowser();
    }
  }
</script>

<style lang="scss">
  .header-wr {
    box-shadow: 0px 1px 10px rgba(205, 205, 205, 0.25);
    background-color: #fff;
    position: sticky;
    top: 0;
  }
  .header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 15px;
    padding-bottom: 20px;
  }

  .header__left {
    display: flex;
    align-items: flex-end;
  }
  .header-logo {
    line-height: 0;
    position: relative;
    svg {
      width: 100px;
      height: auto;
    }
  }
  .header__right {
    display: flex;
    align-items: center;
  }
  .header-login {
    margin-left: 25px;
  }
  .header-ext-link-wr {
    text-align: center;
    height: 38px;

    &:not(:last-child) {
      margin-right: 50px;
    }
  }
  .header-ext-link__text {
    font-size: 14px;
    line-height: 14px;
    color: #fff;
    margin-right: 10px;
  }
  .header-ext-link__icon {
    line-height: 0;

    svg {
      max-width: 22px;

      path {
        fill: #fff;
      }
    }
  }

  @media (max-width: $tablet) {
    .header-logo {
      svg {
        height: 50px;
        width: auto;
      }
    }
    .header-ext-link-wr {
      height: 34px;
    }
  }

  @media (max-width: $mobile) {
    .header-logo {
      margin-right: 20px;

      svg {
        height: 28px;
      }
    }
    .header-ext-link-wr {
      padding: 5px;
      justify-content: center;
      height: 28px;
    }
    .header-ext-link__text {
      font-size: 12px;
    }
    .header-ext-link__icon {
      img {
        width: 16px;
      }
    }
  }
</style>
